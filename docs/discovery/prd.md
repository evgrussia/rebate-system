---
title: "PRD — CryptoRebate MVP"
created_by: "Product Agent"
created_at: "2026-02-04"
version: "1.0"
status: "draft"
---

# PRD: CryptoRebate MVP

> Product Requirements Document — партнёрский rebate-сервис для криптовалютных бирж

---

## 1. Executive Summary

CryptoRebate — сервис-агрегатор партнёрских (rebate/affiliate) программ криптовалютных бирж. Сервис регистрируется как партнёр на биржах, привлекает трейдеров по реферальным ссылкам и возвращает им часть комиссий (cashback/rebate).

**MVP** включает:
- Интеграцию с 11 биржами одновременно
- Веб-ЛК трейдера (React)
- Полноценный Telegram-бот ЛК
- Admin Panel для управления
- Автоматический расчёт и выплату rebate в криптовалюте
- Лендинг/маркетинговый сайт

**Бизнес-модель:** маржа = (rebate от биржи) − (выплата трейдеру). Настройки разделения настраиваемые через админку.

**Tech Stack:** React + Django/Python + PostgreSQL

---

## 2. Problem Statement

### Проблема трейдеров
Криптотрейдеры платят существенные комиссии биржам (спот, фьючерсы). При активной торговле это сотни–тысячи долларов в месяц. Большинство не знают о rebate-программах бирж или не используют их из-за сложности и разрозненности.

### Проблема рынка
Нет единого агрегатора rebate-программ крипто-бирж с удобным интерфейсом для конечного трейдера. Существующие affiliate-программы ориентированы на маркетологов, а не на трейдеров.

### Наше решение
Единая точка входа для получения cashback с комиссий на 11+ биржах: зарегистрировался → получил ссылки → торгуешь → получаешь rebate.

---

## 3. Goals & Success Metrics

### Цели MVP

| # | Цель | Измерение |
|---|------|-----------|
| G1 | Подключить все 11 бирж | 11/11 интеграций работают |
| G2 | Привлечь первых трейдеров | 1,000+ регистраций |
| G3 | Обеспечить положительную unit economics | Маржа > 0 |
| G4 | Обеспечить прозрачность для трейдеров | ЛК с полной статистикой |
| G5 | Автоматизировать расчёт и выплату rebate | Без ручного вмешательства |

### Success Metrics (KPIs)

| Метрика | Целевое значение MVP |
|---------|---------------------|
| Registered Users | 1,000+ |
| Active Traders (30d) | 30%+ от регистраций |
| Trading Volume | $10M+/мес (совокупно) |
| Net Revenue Margin | > 0 |
| Withdrawal Success Rate | > 99% |
| User Retention M1 | > 60% |
| Exchanges Connected | 11 |

### North Star Metric
**Total Trading Volume** — совокупный объём торгов привлечённых трейдеров.

---

## 4. User Personas

### Persona 1: Активный трейдер (Trader Alex) — Primary

- **Торговый объём:** $10K–$500K/мес
- **Биржи:** 2–5 одновременно, спот + фьючерсы
- **Боль:** высокие комиссии
- **Потребности:** cashback, прозрачная статистика, простой вывод
- **Каналы:** Telegram, крипто-сообщества, Twitter/X

### Persona 2: Начинающий трейдер (Newcomer Maria) — Secondary

- **Торговый объём:** $500–$10K/мес
- **Биржи:** 1–2, спот
- **Боль:** не знает о rebate, теряет деньги
- **Потребности:** узнать о возможности, простой старт
- **Каналы:** рекомендации, инфлюенсеры

### Persona 3: Администратор (Admin Ops) — Internal

- **Роль:** управление биржами, ставками, выплатами
- **Потребности:** дашборд, настройки, мониторинг

---

## 5. Functional Requirements

### 5.1 Модуль регистрации и аутентификации (P0)

| ID | Требование | Приоритет |
|----|-----------|-----------|
| FR-001 | Регистрация трейдера через email + пароль | P0 |
| FR-002 | Авторизация (login/logout) с JWT-токенами | P0 |
| FR-003 | Сброс пароля через email | P1 |
| FR-004 | Регистрация/авторизация через Telegram-бот | P0 |
| FR-005 | Привязка Telegram к веб-аккаунту (и наоборот) | P1 |

### 5.2 Управление реферальными ссылками (P0)

| ID | Требование | Приоритет |
|----|-----------|-----------|
| FR-010 | Генерация персональной реферальной ссылки для каждой биржи | P0 |
| FR-011 | Отображение списка бирж с реферальными ссылками в ЛК | P0 |
| FR-012 | Копирование ссылки в один клик | P0 |
| FR-013 | Отслеживание статуса регистрации трейдера на бирже | P1 |
| FR-014 | Инструкция по регистрации на каждой бирже | P1 |

### 5.3 Exchange Integration Layer (P0)

| ID | Требование | Приоритет |
|----|-----------|-----------|
| FR-020 | Унифицированный адаптер для API каждой биржи | P0 |
| FR-021 | Получение данных о комиссиях привлечённых трейдеров | P0 |
| FR-022 | Получение данных о торговых объёмах трейдеров | P0 |
| FR-023 | Получение данных о начисленном rebate от биржи | P0 |
| FR-024 | Периодическая синхронизация данных (cron/celery) | P0 |
| FR-025 | Обработка ошибок и retry при сбоях API | P0 |
| FR-026 | Логирование всех запросов/ответов к API бирж | P1 |
| FR-027 | Мониторинг доступности API бирж | P1 |

**Биржи MVP:**

| # | Биржа | Адаптер |
|---|-------|---------|
| 1 | MEXC | `mexc_adapter` |
| 2 | Bitget | `bitget_adapter` |
| 3 | BingX | `bingx_adapter` |
| 4 | Weex | `weex_adapter` |
| 5 | Bybit | `bybit_adapter` |
| 6 | Binance | `binance_adapter` |
| 7 | Bitmart | `bitmart_adapter` |
| 8 | OKX | `okx_adapter` |
| 9 | KuCoin | `kucoin_adapter` |
| 10 | HTX | `htx_adapter` |
| 11 | BloFin | `blofin_adapter` |

### 5.4 Rebate Calculator (P0)

| ID | Требование | Приоритет |
|----|-----------|-----------|
| FR-030 | Автоматический расчёт rebate для каждого трейдера | P0 |
| FR-031 | Настраиваемый процент разделения (сервис/трейдер) per биржа | P0 |
| FR-032 | Индивидуальные условия для отдельных трейдеров | P1 |
| FR-033 | Расчёт rebate по периодам (день/неделя/месяц) | P0 |
| FR-034 | Хранение истории всех расчётов | P0 |
| FR-035 | Поддержка разных валют rebate (USDT, BTC и др.) | P1 |

### 5.5 Личный кабинет трейдера — Веб (P0)

| ID | Требование | Приоритет |
|----|-----------|-----------|
| FR-040 | Дашборд: общая сумма rebate, объём торгов, количество бирж | P0 |
| FR-041 | Статистика по каждой бирже: объём, комиссии, rebate | P0 |
| FR-042 | История начислений rebate (таблица с фильтрами) | P0 |
| FR-043 | История выплат (таблица с фильтрами) | P0 |
| FR-044 | Баланс доступный для вывода | P0 |
| FR-045 | Форма запроса на вывод средств | P0 |
| FR-046 | Статус вывода (pending → processing → completed/failed) | P0 |
| FR-047 | Настройки профиля (email, пароль, привязка Telegram) | P1 |
| FR-048 | Уведомления о начислениях и выплатах | P1 |
| FR-049 | Графики: динамика rebate по месяцам | P2 |

### 5.6 Личный кабинет трейдера — Telegram Bot (P0)

| ID | Требование | Приоритет |
|----|-----------|-----------|
| FR-050 | Регистрация/авторизация через Telegram | P0 |
| FR-051 | Дашборд: общий rebate, баланс, биржи | P0 |
| FR-052 | Получение реферальных ссылок для бирж | P0 |
| FR-053 | Просмотр статистики по биржам | P0 |
| FR-054 | История начислений и выплат | P0 |
| FR-055 | Запрос на вывод средств | P0 |
| FR-056 | Статус вывода | P0 |
| FR-057 | Push-уведомления: начисления, выплаты, изменения | P0 |
| FR-058 | Inline-кнопки для навигации | P0 |
| FR-059 | Языковые настройки (RU/EN) | P2 |

### 5.7 Payout Engine — Вывод средств (P0)

| ID | Требование | Приоритет |
|----|-----------|-----------|
| FR-060 | Запрос на вывод: сумма, адрес кошелька, сеть | P0 |
| FR-061 | Минимальная сумма вывода (настраиваемо per биржа) | P0 |
| FR-062 | Очередь выплат с приоритизацией | P0 |
| FR-063 | Верификация адреса кошелька | P1 |
| FR-064 | Автоматическое исполнение выплат (если < порога) | P1 |
| FR-065 | Ручное подтверждение выплат (если > порога, через админку) | P0 |
| FR-066 | Статусы вывода: pending → approved → processing → completed/failed | P0 |
| FR-067 | Уведомление трейдера о статусе выплаты | P0 |
| FR-068 | Повторная попытка при ошибке | P1 |
| FR-069 | Настраиваемая периодичность выплат per биржа | P1 |

### 5.8 Admin Panel (P0)

| ID | Требование | Приоритет |
|----|-----------|-----------|
| FR-070 | Дашборд: общая статистика (пользователи, объёмы, rebate, маржа) | P0 |
| FR-071 | Управление биржами: добавление, настройка API, статус | P0 |
| FR-072 | Настройка rebate-ставок per биржа (% сервис / % трейдер) | P0 |
| FR-073 | Индивидуальные условия для конкретных трейдеров | P1 |
| FR-074 | Список пользователей с поиском и фильтрами | P0 |
| FR-075 | Детальная карточка пользователя (баланс, биржи, история) | P0 |
| FR-076 | Очередь выплат: просмотр, одобрение, отклонение | P0 |
| FR-077 | История всех транзакций | P0 |
| FR-078 | Настройка минимальных сумм вывода per биржа | P0 |
| FR-079 | Настройка периодичности выплат per биржа | P1 |
| FR-080 | Логи системы и ошибки интеграций | P1 |
| FR-081 | Управление администраторами (роли) | P2 |

### 5.9 Лендинг / Маркетинговый сайт (P1)

| ID | Требование | Приоритет |
|----|-----------|-----------|
| FR-090 | Лендинг с описанием сервиса и преимуществ | P1 |
| FR-091 | Список поддерживаемых бирж | P1 |
| FR-092 | Калькулятор потенциального rebate | P2 |
| FR-093 | CTA: регистрация / переход в Telegram-бот | P1 |
| FR-094 | FAQ секция | P1 |
| FR-095 | SEO-оптимизация | P2 |

---

## 6. Non-Functional Requirements (NFRs)

### 6.1 Performance

| ID | Требование | Целевое значение |
|----|-----------|-----------------|
| NFR-001 | Время загрузки страницы ЛК | < 2 сек |
| NFR-002 | Время ответа API | < 500 мс (P95) |
| NFR-003 | Синхронизация данных с бирж | Каждые 1–6 часов (настраиваемо) |
| NFR-004 | Обработка очереди выплат | < 1 часа от approved до processing |

### 6.2 Scalability

| ID | Требование | Целевое значение |
|----|-----------|-----------------|
| NFR-010 | Пользователи | До 10,000 (MVP) |
| NFR-011 | Одновременные сессии | До 1,000 |
| NFR-012 | Записи транзакций | До 10M |

### 6.3 Security

| ID | Требование | Приоритет |
|----|-----------|-----------|
| NFR-020 | HTTPS everywhere | P0 |
| NFR-021 | Хэширование паролей (bcrypt/argon2) | P0 |
| NFR-022 | JWT с refresh tokens | P0 |
| NFR-023 | Шифрование API-ключей бирж at rest | P0 |
| NFR-024 | Rate limiting на API | P0 |
| NFR-025 | CORS настройка | P0 |
| NFR-026 | Защита от CSRF, XSS, SQL injection | P0 |
| NFR-027 | Аудит-лог действий администраторов | P1 |
| NFR-028 | 2FA для администраторов | P1 |

### 6.4 Reliability

| ID | Требование | Целевое значение |
|----|-----------|-----------------|
| NFR-030 | Uptime | 99.5% |
| NFR-031 | Backup БД | Ежедневно |
| NFR-032 | Восстановление после сбоя | < 1 часа |

### 6.5 Localization

| ID | Требование | Приоритет |
|----|-----------|-----------|
| NFR-040 | Интерфейс на русском языке (основной) | P0 |
| NFR-041 | Интерфейс на английском языке | P1 |

---

## 7. Constraints & Assumptions

### Constraints (Ограничения)

| # | Ограничение | Влияние |
|---|------------|---------|
| C1 | Зависимость от API каждой биржи (формат, лимиты, доступность) | Каждый адаптер уникален |
| C2 | Условия партнёрских программ могут измениться без предупреждения | Необходим мониторинг |
| C3 | Выплаты только в криптовалюте (нет фиата) | Упрощает регуляторику |
| C4 | Нет собственного KYC — идентификация через биржу | Меньше данных, меньше ответственности |
| C5 | Global аудитория — мультиюрисдикция | Нужна гибкая гео-политика |

### Assumptions (Допущения)

| # | Допущение | Риск при невыполнении |
|---|----------|----------------------|
| A1 | Все 11 бирж имеют API для партнёрских программ | Биржу нельзя подключить → уменьшение MVP scope |
| A2 | Условия бирж позволяют выплату rebate конечным трейдерам | Юридический риск → консультация |
| A3 | Трейдеры готовы регистрироваться на биржах по реферальным ссылкам | Низкая конверсия → усилить маркетинг |
| A4 | API бирж стабильны и имеют достаточную документацию | Проблемы интеграции → больше времени на адаптер |

---

## 8. Out of Scope (MVP)

- Суб-партнёрская / multi-level программа
- Мобильное приложение
- Собственная торговая платформа
- Copy-trading
- Фиатные выводы
- KYC на стороне сервиса
- AI-рекомендации
- VIP-программа
- Расширенная аналитика (графики доходности, сравнение бирж)

---

## 9. Dependencies

### Внешние зависимости

| # | Зависимость | Влияет на |
|---|------------|-----------|
| D1 | API 11 бирж (доступность, документация) | Exchange Integration Layer |
| D2 | Telegram Bot API | Telegram ЛК |
| D3 | Крипто-кошельки для выплат | Payout Engine |
| D4 | Email-сервис (SMTP / SendGrid) | Регистрация, уведомления |
| D5 | Хостинг / VPS | Деплой |

### Внутренние зависимости (порядок реализации)

```
1. Auth Module          → Основа для всего
2. Exchange Integration → Данные для расчёта
3. Rebate Calculator    → Зависит от Exchange Integration
4. Payout Engine        → Зависит от Rebate Calculator
5. Trader Dashboard     → Зависит от 2, 3, 4
6. Telegram Bot         → Зависит от 2, 3, 4 (общий backend)
7. Admin Panel          → Зависит от всех модулей
8. Landing Page         → Независимый, можно параллельно
```

---

## 10. Risks & Mitigations

| # | Риск | Вероятность | Влияние | Митигация |
|---|------|-------------|---------|-----------|
| R1 | Биржа изменит условия партнёрки | Высокая | Высокое | Диверсификация (11 бирж), мониторинг условий, оповещения |
| R2 | API биржи нестабилен / меняется | Средняя | Среднее | Абстрактный адаптер, retry, circuit breaker, мониторинг |
| R3 | Низкая конверсия регистраций | Средняя | Высокое | A/B тесты, инфлюенсеры, контент-маркетинг |
| R4 | Мошеннические аккаунты / wash trading | Средняя | Среднее | Антифрод-правила, верификация через биржу |
| R5 | Регуляторные ограничения | Средняя | Среднее | Юридический мониторинг, гео-блокировка при необходимости |
| R6 | Задержки интеграции из-за плохой документации бирж | Высокая | Среднее | Начать с бирж с лучшей документацией, буферное время |
| R7 | Ошибки в расчёте rebate | Низкая | Высокое | Двойная проверка, аудит-логи, reconciliation |

---

## 11. Feature Priority Matrix (MoSCoW)

### Must Have (P0) — MVP Launch Blockers

- Регистрация/авторизация (web + Telegram)
- Exchange Integration Layer (11 бирж)
- Генерация реферальных ссылок
- Rebate Calculator (автоматический расчёт)
- Trader Dashboard (web): дашборд, статистика, баланс, вывод
- Telegram Bot ЛК: дашборд, ссылки, статистика, вывод
- Payout Engine: очередь, статусы, исполнение
- Admin Panel: дашборд, биржи, ставки, пользователи, выплаты

### Should Have (P1) — Важно, но не блокирует запуск

- Лендинг/маркетинговый сайт
- Сброс пароля
- Привязка Telegram к web-аккаунту
- Статус регистрации на бирже
- Инструкции по регистрации на биржах
- Индивидуальные rebate-условия
- Логи интеграций в админке
- Мониторинг API бирж
- Верификация адреса кошелька
- Уведомления (email)
- Английский язык интерфейса
- 2FA для админов
- Аудит-лог для админов

### Could Have (P2) — Бонус, если успеем

- Калькулятор rebate на лендинге
- Графики в ЛК трейдера
- SEO-оптимизация
- Управление ролями администраторов
- Языковые настройки в Telegram-боте

### Won't Have (P3) — Не в MVP

- Multi-level партнёрка
- Мобильное приложение
- Фиатные выводы
- Copy-trading
- AI-рекомендации

---

## 12. Information Architecture (высокий уровень)

### Веб-приложение трейдера

```
/                          → Лендинг
/login                     → Вход
/register                  → Регистрация
/dashboard                 → Дашборд (главная ЛК)
/dashboard/exchanges       → Биржи и реферальные ссылки
/dashboard/statistics      → Статистика по биржам
/dashboard/history         → История начислений
/dashboard/payouts         → История и запрос выплат
/dashboard/settings        → Настройки профиля
```

### Admin Panel

```
/admin                     → Дашборд
/admin/exchanges           → Управление биржами
/admin/users               → Пользователи
/admin/users/:id           → Карточка пользователя
/admin/payouts             → Очередь выплат
/admin/transactions        → Все транзакции
/admin/settings            → Настройки системы
```

### Telegram Bot

```
/start                     → Регистрация / Авторизация
Главное меню               → Дашборд
  ├── Мои биржи            → Ссылки и статус
  ├── Статистика           → По биржам
  ├── Начисления           → История
  ├── Выплаты              → История + запрос
  ├── Настройки            → Профиль
  └── Помощь               → FAQ / Support
```

---

## 13. Acceptance Criteria (ключевые сценарии)

### AC-001: Регистрация трейдера

```
Given: Новый пользователь на странице регистрации
When: Вводит email и пароль, нажимает "Зарегистрироваться"
Then: Аккаунт создан, пользователь перенаправлен в ЛК, отображается дашборд с 0 rebate и список бирж для подключения
```

### AC-002: Получение реферальной ссылки

```
Given: Авторизованный трейдер в ЛК
When: Переходит на страницу "Биржи", выбирает MEXC
Then: Отображается персональная реферальная ссылка для MEXC с кнопкой "Копировать"
```

### AC-003: Отображение rebate в дашборде

```
Given: Трейдер зарегистрирован на бирже MEXC по реферальной ссылке, совершил сделки
When: Система синхронизировала данные с MEXC
Then: В дашборде отображается: объём торгов, комиссии, начисленный rebate, баланс для вывода
```

### AC-004: Вывод средств

```
Given: Трейдер имеет баланс >= минимальной суммы вывода
When: Заполняет форму вывода (сумма, адрес, сеть) и подтверждает
Then: Заявка создана со статусом "pending", трейдер видит её в истории выплат, получает уведомление
```

### AC-005: Админ настраивает rebate-ставку

```
Given: Администратор в Admin Panel
When: Открывает настройки биржи MEXC, устанавливает split: 60% трейдеру / 40% сервису
Then: Все новые расчёты rebate для MEXC используют эту пропорцию
```

### AC-006: Telegram Bot — дашборд

```
Given: Трейдер авторизован в Telegram-боте
When: Нажимает кнопку "Дашборд"
Then: Бот отображает: общий rebate, баланс, количество подключённых бирж, кнопки навигации
```

---

## 14. Release Milestones

### Milestone 1: MVP Core (фундамент)
- Auth module (web + Telegram)
- Database schema
- Exchange Integration Layer (первые 3 биржи для тестирования)
- Basic Admin Panel

### Milestone 2: MVP Full Integration
- Все 11 бирж подключены
- Rebate Calculator работает
- Payout Engine работает

### Milestone 3: MVP Frontend
- Trader Dashboard (web, полный)
- Telegram Bot (полный ЛК)
- Admin Panel (полный)

### Milestone 4: MVP Launch
- Лендинг
- Тестирование (QA)
- Деплой на production
- Мониторинг

---

*Документ создан: Product Agent | Дата: 2026-02-04*
